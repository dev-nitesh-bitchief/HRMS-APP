
 <title>Login Page</title>
  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom CSS -->
  <style>
    .toast {
      visibility: hidden;
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #f44336; /* Red */
      color: white;
      text-align: center;
      padding: 16px;
      border-radius: 8px;
      z-index: 1;
    }

    .show {
      visibility: visible;
      animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }

    @keyframes fadein {
      from { bottom: 0; opacity: 0; }
      to { bottom: 20px; opacity: 1; }
    }

    @keyframes fadeout {
      from { bottom: 20px; opacity: 1; }
      to { bottom: 0; opacity:0;}
}
  </style>
<body>
  <div class="container-scroller">
    <div class="container-fluid page-body-wrapper full-page-wrapper">
      <div class="content-wrapper d-flex align-items-center auth px-0">
        <div class="row w-100 mx-0">
          <div class="col-lg-4 mx-auto">
            <div class="auth-form-light text-left py-5 px-4 px-sm-5">
              <div class="brand-logo">
                <img src="../../images/logo.svg" alt="logo">
              </div>
              <h4>Hello! let's get started</h4>
              <h6 class="fw-light">Sign in to continue.</h6>
              <form id="loginForm" class="pt-3">
                <div class="form-group">
                  <input type="username" class="form-control form-control-lg" id="username" placeholder="Username">
                </div>
                <div class="form-group">
                  <input type="password" class="form-control form-control-lg" id="password" placeholder="Password">
                </div>
                <div class="mt-3">
                  <a class="btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn">LOGIN</a>
                </div>
              </form>
            </div>
            <div id="toast"  class="toast"></div>
          </div>
        </div>
      </div>
      <!-- content-wrapper ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <script>
    document.getElementById('loginForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent form submission until API response is received

    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    if (!username || !password) {
      showToast('Please enter both username and password.');
      return; // Exit the function if username or password is empty
      }
fetch('/log', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ username: username, password: password })
    })
   .then(response => {
  if (response.ok) {
    debugger
    // Redirect to the employee page if login is successful
    window.location.href = '/index';
  } else {
    response.json().then(data => {
      console.log(data);
      // Display an error message if login fails
      if (!data.success) {
        debugger
        showToast(data.message);
      } else {
        showToast('An error occurred. Please try again later.');
      }
    }).catch(error => {
      debugger

      showToast('An error occurred. Please try again later.');
    });
  }
})

    .catch(error => {
      debugger
      // Handle any errors that occur during the API request
      console.error('Error:', error);
      showToast('An error occurred. Please try again later.');
    });
  });

  function showToast(message) {
    const toast = document.getElementById('toast');
    toast.innerHTML = message;
    toast.classList.add('show');
    setTimeout(() => {
      toast.classList.remove('show');
    }, 3000); // Hide toast after 3 seconds (adjust as needed)
}
  </script>
</body>

